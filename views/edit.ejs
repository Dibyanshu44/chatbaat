<%- include("partials/header.ejs") %>

<main>
  <div class="container auth-box">
    <a href="/chat/<%= user2 %>?user=<%= user1 %>" class="back-button">← Back to Chat</a>

    <h2>Edit Message</h2>

    <form method="POST" action="/edit/<%= user2 %>?user=<%= user1 %>&j=<%= j %>">
      <label for="msg">Edit your message:</label>
      <div class="input">
        <% 
          let msgValue = "";
          const sepIndex = content.indexOf(": ");
          if (sepIndex !== -1) {
            msgValue = content.slice(sepIndex + 2);
          }
        %>
        <input
          type="text"
          id="msg"
          name="msg"
          value="<%= msgValue %>"
          required
          maxlength="500"
          autocomplete="off"
        >
      </div>
      <input type="submit" value="Save">
    </form>
  </div>
</main>

<%- include("partials/footer.ejs") %>
